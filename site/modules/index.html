<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Guides, references, and roadmaps for the Bamboo microframework"><link href=https://greenarmor.github.io/bamboo/modules/ rel=canonical><link href=../Install-Bamboo-PHP84/ rel=prev><link href=../router/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>Modules - Bamboo Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#module-extension-api-v10-contract class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Bamboo Documentation" class="md-header__button md-logo" aria-label="Bamboo Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Bamboo Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Modules </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/greenarmor/bamboo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> greenarmor/bamboo </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Bamboo Documentation" class="md-nav__button md-logo" aria-label="Bamboo Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Bamboo Documentation </label> <div class=md-nav__source> <a href=https://github.com/greenarmor/bamboo title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> greenarmor/bamboo </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Installation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Install-Bamboo-PHP82/ class=md-nav__link> <span class=md-ellipsis> PHP 8.2 </span> </a> </li> <li class=md-nav__item> <a href=../Install-Bamboo-PHP83/ class=md-nav__link> <span class=md-ellipsis> PHP 8.3 </span> </a> </li> <li class=md-nav__item> <a href=../Install-Bamboo-PHP84/ class=md-nav__link> <span class=md-ellipsis> PHP 8.4 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Framework Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Framework Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Modules </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Modules </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lifecycle-hooks class=md-nav__link> <span class=md-ellipsis> Lifecycle hooks </span> </a> </li> <li class=md-nav__item> <a href=#discovery-and-configuration class=md-nav__link> <span class=md-ellipsis> Discovery and configuration </span> </a> </li> <li class=md-nav__item> <a href=#semantic-versioning-guidance class=md-nav__link> <span class=md-ellipsis> Semantic versioning guidance </span> </a> </li> <li class=md-nav__item> <a href=#deprecation-policy class=md-nav__link> <span class=md-ellipsis> Deprecation policy </span> </a> </li> <li class=md-nav__item> <a href=#quality-gates-and-examples class=md-nav__link> <span class=md-ellipsis> Quality gates and examples </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../router/ class=md-nav__link> <span class=md-ellipsis> Router </span> </a> </li> <li class=md-nav__item> <a href=../ui-templating/ class=md-nav__link> <span class=md-ellipsis> UI Templating </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../cli/ class="md-nav__link "> <span class=md-ellipsis> CLI </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cli/jwt-auth-toolkit/ class=md-nav__link> <span class=md-ellipsis> JWT Auth Toolkit </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../tasks/ class="md-nav__link "> <span class=md-ellipsis> Tasks </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tasks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tasks/config-validation-ci/ class=md-nav__link> <span class=md-ellipsis> Config Validation in CI </span> </a> </li> <li class=md-nav__item> <a href=../tasks/benchmarks-baseline-dataset/ class=md-nav__link> <span class=md-ellipsis> Benchmarks Baseline Dataset </span> </a> </li> <li class=md-nav__item> <a href=../tasks/upgrade-guide-config-deprecations/ class=md-nav__link> <span class=md-ellipsis> Upgrade Guide Config Deprecations </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../benchmarks/ class="md-nav__link "> <span class=md-ellipsis> Benchmarks </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Benchmarks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../benchmarks/data/20240528-baseline/ class=md-nav__link> <span class=md-ellipsis> Baseline Dataset (2024-05-28) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../starters/ class=md-nav__link> <span class=md-ellipsis> Starters </span> </a> </li> <li class=md-nav__item> <a href=../OpenSwoole-Compat-and-Fixes/ class=md-nav__link> <span class=md-ellipsis> Compatibility </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex> <span class=md-ellipsis> Upgrade </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../upgrade/v1.0/ class=md-nav__link> <span class=md-ellipsis> Bamboo v1.0 Upgrade Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex> <span class=md-ellipsis> Roadmap </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/v0.3-prep/ class=md-nav__link> <span class=md-ellipsis> v0.3 Prep </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/v0.4-prep/ class=md-nav__link> <span class=md-ellipsis> v0.4 Prep </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/v1.0-prep/ class=md-nav__link> <span class=md-ellipsis> v1.0 Prep </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lifecycle-hooks class=md-nav__link> <span class=md-ellipsis> Lifecycle hooks </span> </a> </li> <li class=md-nav__item> <a href=#discovery-and-configuration class=md-nav__link> <span class=md-ellipsis> Discovery and configuration </span> </a> </li> <li class=md-nav__item> <a href=#semantic-versioning-guidance class=md-nav__link> <span class=md-ellipsis> Semantic versioning guidance </span> </a> </li> <li class=md-nav__item> <a href=#deprecation-policy class=md-nav__link> <span class=md-ellipsis> Deprecation policy </span> </a> </li> <li class=md-nav__item> <a href=#quality-gates-and-examples class=md-nav__link> <span class=md-ellipsis> Quality gates and examples </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=module-extension-api-v10-contract>Module Extension API (v1.0 Contract)<a class=headerlink href=#module-extension-api-v10-contract title="Permanent link">&para;</a></h1> <p>Modules package reusable integrations for Bamboo. Each module implements <code>Bamboo\Module\ModuleInterface</code> and is loaded through <code>Application::bootModules</code> after the framework has registered its core providers. This document freezes the contract for v1.0 module authors.</p> <h2 id=lifecycle-hooks>Lifecycle hooks<a class=headerlink href=#lifecycle-hooks title="Permanent link">&para;</a></h2> <p><code>ModuleInterface</code> defines three methods:</p> <ol> <li><code>register(Application $app): void</code></li> <li>Called immediately after the module is instantiated.</li> <li>Register container singletons, bindings, and configuration defaults.</li> <li>Avoid performing I/O or resolving heavy services.</li> <li><code>boot(Application $app): void</code></li> <li>Invoked after <strong>all</strong> modules have finished registration.</li> <li>Safe place to resolve dependencies registered by other modules.</li> <li>Ideal for wiring event listeners, scheduling jobs, or introspecting configuration.</li> <li><code>middleware(): array</code></li> <li>Returns global middleware, named groups, or alias definitions using the structure consumed by <code>Config::mergeMiddleware()</code>.</li> <li>Called once per module; the return value is merged into <code>config('middleware')</code> before the HTTP kernel builds route-specific stacks.</li> </ol> <p>Modules are instantiated in the order they appear in <code>etc/modules.php</code>. <code>register()</code> is executed for each module in sequence, then <code>boot()</code> is executed in the same order. This guarantees deterministic setup and mirrors the behaviour covered by <code>tests/Core/ApplicationModulesTest.php</code>.</p> <h2 id=discovery-and-configuration>Discovery and configuration<a class=headerlink href=#discovery-and-configuration title="Permanent link">&para;</a></h2> <p>Modules are discovered through <code>etc/modules.php</code> which returns a list of fully-qualified class names:</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=k>return</span> <span class=p>[</span>
    <span class=nx>App\Infrastructure\MetricsModule</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
    <span class=nx>Vendor\Package\QueueModule</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<span class=p>];</span>
</code></pre></div> <p>Configuration guidelines:</p> <ul> <li>Use dedicated <code>etc/</code> files (e.g. <code>etc/queue.php</code>) or nest module configuration under a namespaced key inside <code>config('app')</code>. Document the expected schema in your package README and expose validation logic when appropriate.</li> <li>Publish sensible defaults inside <code>register()</code> so downstream applications can opt-in incrementally.</li> <li>When contributing middleware, return arrays shaped like:</li> </ul> <div class=highlight><pre><span></span><code><span class=x>public function middleware(): array</span>
<span class=x>{</span>
<span class=x>    return [</span>
<span class=x>        &#39;global&#39; =&gt; [\Vendor\Middleware\Audit::class],</span>
<span class=x>        &#39;groups&#39; =&gt; [</span>
<span class=x>            &#39;api&#39; =&gt; [\Vendor\Middleware\Authorize::class],</span>
<span class=x>        ],</span>
<span class=x>        &#39;aliases&#39; =&gt; [</span>
<span class=x>            &#39;vendor.audit&#39; =&gt; \Vendor\Middleware\Audit::class,</span>
<span class=x>        ],</span>
<span class=x>    ];</span>
<span class=x>}</span>
</code></pre></div> <h2 id=semantic-versioning-guidance>Semantic versioning guidance<a class=headerlink href=#semantic-versioning-guidance title="Permanent link">&para;</a></h2> <p>Modules follow normal semver rules:</p> <ul> <li>Backwards-incompatible changes to exported PHP classes, configuration keys, or middleware aliases require a major version bump.</li> <li>Adding optional constructor arguments, new configuration keys with sensible defaults, or additional middleware entries is safe in minor releases.</li> <li>When introducing new hooks, provide default implementations so existing consumers continue to operate without modification.</li> </ul> <p>Compatibility testing should cover:</p> <ul> <li><code>phpunit</code> suites that assert container bindings and middleware are registered.</li> <li>Static analysis (PHPStan/Psalm) that exercises public APIs.</li> <li>Smoke tests against a Bamboo skeleton app to ensure the module boots under <code>php bin/bamboo http.serve</code>.</li> </ul> <h2 id=deprecation-policy>Deprecation policy<a class=headerlink href=#deprecation-policy title="Permanent link">&para;</a></h2> <ul> <li>Announce deprecations in your module's changelog and documentation.</li> <li>Emit <code>E_USER_DEPRECATED</code> notices the first time deprecated functionality is used.</li> <li>Maintain deprecated methods or aliases for at least one minor release. Removal must coincide with a major release and an upgrade guide entry.</li> <li>Provide automated migration helpers (PHP CS Fixer rules, Rector sets, etc.) when APIs undergo structural changes.</li> </ul> <h2 id=quality-gates-and-examples>Quality gates and examples<a class=headerlink href=#quality-gates-and-examples title="Permanent link">&para;</a></h2> <ul> <li><code>tests/Core/ApplicationModulesTest.php</code> in the Bamboo repository verifies middleware merging order and lifecycle sequencing.</li> <li>Example modules shipping with the framework (<code>Tests\Stubs\TestModuleAlpha</code> and <code>TestModuleBeta</code>) demonstrate how to publish middleware groups, global entries, and aliases in a deterministic manner.</li> <li>Modules are expected to integrate with the <code>composer validate:config</code> workflow by offering validators for any new configuration files and documenting the command in their README.</li> </ul> <p>By adhering to this contract, module authors can publish integrations that remain compatible across the entire 1.x series without surprises for operators.</p> <h1 id=module-extension-api-v10-freeze>Module Extension API (v1.0 Freeze)<a class=headerlink href=#module-extension-api-v10-freeze title="Permanent link">&para;</a></h1> <p>Modules let teams extend Bamboo's container, middleware pipeline, and background workers. The guidance below defines what the v1.0 contract promises for module authors and how framework consumers should expect modules to behave.</p> <h2 id=lifecycle-hooks_1>Lifecycle hooks<a class=headerlink href=#lifecycle-hooks_1 title="Permanent link">&para;</a></h2> <p><code>Bamboo\Core\Application::bootModules()</code> performs the module lifecycle in a strict sequence to guarantee determinism across environments:</p> <ol> <li><strong>Instantiation</strong> – classes listed in <code>etc/modules.php</code> are instantiated in the order they appear. Each class <strong>must</strong> implement <code>Bamboo\Module\ModuleInterface</code> or the bootstrap will abort with an <code>InvalidArgumentException</code>.</li> <li><strong>Register phase</strong> – Bamboo calls <code>register(Application $app)</code> on each module before any <code>boot()</code> logic runs. Use this phase to:</li> <li>bind services, singletons, and event listeners into the container;</li> <li>publish configuration defaults or merge feature flags; and</li> <li>perform work that can run multiple times without side effects. Prefer container helpers such as <code>$app-&gt;singleton()</code> to ensure idempotent bindings.</li> <li><strong>Middleware contribution</strong> – immediately after <code>register()</code> returns, the framework calls <code>middleware()</code> on the module and merges the returned arrays into the global configuration via <code>Config::mergeMiddleware()</code>. Modules should only return lists of class strings or aliases; they should never modify the configuration object directly.</li> <li><strong>Boot phase</strong> – once <em>every</em> module has registered, Bamboo calls <code>boot(Application $app)</code> on each instance in registration order. Because all modules are fully registered at this point, the boot phase is safe for resolving other modules' services, wiring middleware pipelines, and kicking off background workers.</li> </ol> <h3 id=timing-guarantees-and-coordination>Timing guarantees and coordination<a class=headerlink href=#timing-guarantees-and-coordination title="Permanent link">&para;</a></h3> <ul> <li>Registration for all modules completes before any boot logic executes. If your module depends on another module's container bindings, defer that work to <code>boot()</code> or perform an <code>$app-&gt;has()</code> guard inside <code>register()</code>.</li> <li>Modules should not resolve the HTTP kernel or router during <code>register()</code>; the router is configured prior to module registration, and premature resolution can break route caching.</li> <li>Because modules are instantiated once per process, prefer lazy factories or closures for expensive resources and expose them via container bindings. Avoid storing state on the module instance itself.</li> </ul> <h3 id=middleware-patterns>Middleware patterns<a class=headerlink href=#middleware-patterns title="Permanent link">&para;</a></h3> <ul> <li>Return middleware contributions as associative arrays with <code>global</code>, <code>groups</code>, and <code>aliases</code> keys to merge seamlessly with application configuration.</li> <li>Ensure middleware lists contain fully-qualified class strings. <code>Config</code> will normalise iterables and nested arrays, but empty strings or non-class values are discarded.</li> <li>When exposing middleware aliases, keep alias names unique across modules. Later modules in the list override earlier aliases, so coordinate with downstream applications before reusing common names (for example <code>auth</code> or <code>throttle</code>).</li> </ul> <h2 id=discovery-and-configuration_1>Discovery and configuration<a class=headerlink href=#discovery-and-configuration_1 title="Permanent link">&para;</a></h2> <h3 id=registering-modules-in-etcmodulesphp>Registering modules in <code>etc/modules.php</code><a class=headerlink href=#registering-modules-in-etcmodulesphp title="Permanent link">&para;</a></h3> <p><code>etc/modules.php</code> returns an ordered list of fully-qualified class names:</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=k>use</span> <span class=nx>App\Modules\TelemetryModule</span><span class=p>;</span>
<span class=k>use</span> <span class=nx>App\Modules\FeatureFlagsModule</span><span class=p>;</span>

<span class=k>return</span> <span class=p>[</span>
    <span class=nx>TelemetryModule</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
    <span class=nx>FeatureFlagsModule</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
<span class=p>];</span>
</code></pre></div> <p>Key expectations:</p> <ul> <li>Declare only class-string literals. Conditional logic is acceptable, but keep the file synchronous and side-effect free (for example, gate a module behind an environment variable with <code>if (getenv('ENABLE_TELEMETRY')) { ... }</code>).</li> <li>Order matters. Modules later in the array can rely on container bindings or middleware aliases published by earlier entries.</li> <li>The file is autoloaded during bootstrap, so it must return quickly. Avoid network calls or heavy filesystem work.</li> </ul> <h3 id=module-owned-configuration>Module-owned configuration<a class=headerlink href=#module-owned-configuration title="Permanent link">&para;</a></h3> <ul> <li>Modules may ship their own configuration files under <code>etc/</code>. Use a namespace that avoids collisions (for example, <code>etc/telemetry.php</code>).</li> <li>Configuration files should return arrays and follow the same dot-notation conventions as the core configuration.</li> <li>During <code>register()</code>, read configuration using <code>$app-&gt;config('telemetry.*')</code>. Do not attempt to load files manually.</li> <li>When publishing default configuration from a package, provide install instructions that copy the file into the host application's <code>etc/</code> directory and document which keys are required.</li> </ul> <h2 id=semantic-versioning-guidance_1>Semantic versioning guidance<a class=headerlink href=#semantic-versioning-guidance_1 title="Permanent link">&para;</a></h2> <p>Modules must follow <a href=https://semver.org/ >Semantic Versioning 2.0.0</a> when shipped as Composer packages or distributed internally:</p> <ul> <li><strong>MAJOR (x.0.0)</strong> – increment when removing container bindings, renaming middleware aliases, changing the shape of published configuration arrays, or altering behaviour in a way that breaks existing consumers.</li> <li><strong>MINOR (x.y.0)</strong> – increment when adding new services, configuration keys, or middleware that default to disabled/off. Optional parameters may be added to existing container factories, provided default values preserve the previous behaviour.</li> <li><strong>PATCH (x.y.z)</strong> – increment for backwards-compatible bug fixes and internal cleanups.</li> </ul> <p>Compatibility expectations:</p> <ul> <li>Declare the supported Bamboo versions in <code>composer.json</code> (for example, <code>"bamboo/framework": "^1.0"</code>).</li> <li>Maintain an automated compatibility suite that boots a minimal application, loads the module via <code>etc/modules.php</code>, and exercises its bindings. The canonical pattern uses <code>tests/Core/ApplicationModulesTest.php</code> as reference for asserting registration/boot order.</li> <li>Run your module's test suite against the lowest and highest supported Bamboo 1.x versions before tagging a release.</li> </ul> <h2 id=deprecation-policy_1>Deprecation policy<a class=headerlink href=#deprecation-policy_1 title="Permanent link">&para;</a></h2> <p>Bamboo enforces a two-step deprecation cycle for the module contract:</p> <ol> <li><strong>Introduce deprecation in v1.x</strong> – mark APIs, configuration keys, or middleware aliases as deprecated. Modules should:</li> <li>emit an <code>E_USER_DEPRECATED</code> warning the first time the deprecated feature is used;</li> <li>note the deprecation in the package <code>CHANGELOG.md</code> and release notes; and</li> <li>document the replacement in <code>docs/modules.md</code> (or the module's README) with upgrade instructions.</li> <li><strong>Removal no earlier than v2.0</strong> – the deprecated surface remains available through the final v1.x release. Removal requires a major version bump and a migration guide that highlights breaking changes.</li> </ol> <p>Communication requirements:</p> <ul> <li>Announce deprecations in the next release notes and the community discussion board.</li> <li>Provide copy-and-paste upgrade snippets for maintainers. A recommended format is:</li> </ul> <blockquote> <p><strong>Deprecated:</strong> <code>TelemetryModule::class</code> middleware alias <code>telemetry.trace</code> will be removed in v2.0. Use <code>telemetry.telemetryTrace</code> instead and publish the new configuration key <code>telemetry.trace.driver</code>.</p> </blockquote> <ul> <li>If the deprecation affects runtime behaviour, add logging or metrics to help operators identify affected services before the removal window closes.</li> </ul> <h2 id=quality-gates>Quality gates<a class=headerlink href=#quality-gates title="Permanent link">&para;</a></h2> <ul> <li>Example modules used by the framework's own test suite live in <code>tests/Stubs/</code>. Use them as blueprints for structuring small, self-contained modules.</li> <li>Contract tests in <code>tests/Core/ApplicationModulesTest.php</code> guard lifecycle ordering and middleware merging. Run these when changing framework internals to ensure third-party modules remain compatible.</li> <li>Modules distributed to the community should enable static analysis (PHPStan at level 8 or higher) and code-style tooling to match the core project's quality bar.</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.expand", "navigation.indexes", "navigation.sections"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>